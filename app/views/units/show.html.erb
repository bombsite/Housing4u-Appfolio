<% title "Unit Listing" %>

<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div class="content">
  <div class="panel panel-default">
    <div class="panel-body">
      <table class="table table-striped">
        <tr>
          <td class="col-md-2">
            <b>Ad Headline</b>
          </td>
          <td>
            <%= @unit.ad_headline %>
          </td>
        </tr>
        <tr>
          <td>
            <b>Map</b>
          </td>
          <td>
            <div style='width: 800px;'>
              <div id="map" style='width: 800px; height: 400px;'></div>
            </div>
            <script type="text/javascript">
                handler = Gmaps.build('Google');
                handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
                    markers = handler.addMarkers([
                        {"lat": <%= @unit.latitude %>, "lng": <%= @unit.longitude %>, 'marker': '<span>Here!</span>'}
                    ]);
                    handler.bounds.extendWith(markers);
                    handler.fitMapToBounds();
                    handler.getMap.setZoom(5);
                });
            </script>
          </td>
        </tr>
        <tr>
          <td>
            <b>Ad Content</b>
          </td>
          <td>
            <%= @unit.ad_content %>
          </td>
        </tr>
        <tr>
          <td>
            <b>Photos</b>
          </td>
          <td>
            <div class="row">

            <% @unit.UnitPhotos.each do |unit_photos| %>
                  <div class="col-lg-4">
                    <a class="fancybox" href="<%= unit_photos.image_url %>" data-fancybox-group="gallery" title=""><img height="150" width="242"  src="<%= unit_photos.image_url %>" alt="" /></a>
                  </div>
              <% end %>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
      $('.fancybox').fancybox();
  });
</script>
